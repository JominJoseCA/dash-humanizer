let saveTimeout = null;const SAVE_DEBOUNCE_MS = 300;async function loadSettings(){try{const settings = await getSettings();document.getElementById('auto-selection').checked = settings.autoHumanizeOnSelection;document.getElementById('auto-type').checked = settings.autoHumanizeOnType;document.getElementById('convert-en-dashes').checked = settings.convertEnDashes;}catch(error){console.error('[Dash Humanizer] Error loading settings:',error);showSaveStatus('Error loading settings','error');}}function saveSettingsDebounced(){if(saveTimeout){clearTimeout(saveTimeout);}saveTimeout = setTimeout(async()=>{try{const settings ={autoHumanizeOnSelection:document.getElementById('auto-selection').checked,autoHumanizeOnType:document.getElementById('auto-type').checked,convertEnDashes:document.getElementById('convert-en-dashes').checked};await saveSettings(settings);showSaveStatus('Settings saved!','success');}catch(error){console.error('[Dash Humanizer] Error saving settings:',error);showSaveStatus('Error saving settings','error');}},SAVE_DEBOUNCE_MS);}function showSaveStatus(message,type){const statusElement = document.getElementById('save-status');statusElement.textContent = message;statusElement.className = `save-status ${type}visible`;setTimeout(()=>{statusElement.classList.remove('visible');},3000);}function init(){loadSettings();const checkboxes = document.querySelectorAll('input[type="checkbox"]');checkboxes.forEach(checkbox =>{checkbox.addEventListener('change',saveSettingsDebounced);});console.log('[Dash Humanizer] Options page initialized');}if(document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}