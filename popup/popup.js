function updateStatusLabel(enabled){const statusLabel = document.getElementById('status-label');statusLabel.textContent = enabled ? 'ON':'OFF';statusLabel.style.color = enabled ? '#1a1a1a':'#999';}async function loadCurrentState(){try{const result = await chrome.storage.sync.get(['enabled']);const enabled = result.enabled !== undefined ? result.enabled:true;const toggle = document.getElementById('enabled-toggle');toggle.checked = enabled;updateStatusLabel(enabled);}catch(error){console.error('[Dash Humanizer] Error loading state:',error);const toggle = document.getElementById('enabled-toggle');toggle.checked = true;updateStatusLabel(true);}}function setupToggleHandler(){const toggle = document.getElementById('enabled-toggle');toggle.addEventListener('change',async(e)=>{const enabled = e.target.checked;try{await chrome.storage.sync.set({enabled});updateStatusLabel(enabled);}catch(error){console.error('[Dash Humanizer] Error saving state:',error);toggle.checked = !enabled;updateStatusLabel(!enabled);}});}function setupLinks(){const optionsLink = document.getElementById('options-link');optionsLink.addEventListener('click',(e)=>{e.preventDefault();chrome.runtime.openOptionsPage();});const helpLink = document.getElementById('help-link');helpLink.addEventListener('click',(e)=>{e.preventDefault();const helpUrl = chrome.runtime.getURL('help.html');chrome.tabs.create({url:helpUrl});});}document.addEventListener('DOMContentLoaded',()=>{loadCurrentState();setupToggleHandler();setupLinks();});