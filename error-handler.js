class ErrorHandler{static handle(error,context,options ={}){console.error(`[Dash Humanizer] ${context}:`,error);const isCritical = options.showNotification !== undefined ? options.showNotification:this.isCritical(error);if(isCritical){const userMessage = this.getUserMessage(error,context);this.showUserNotification(userMessage,'error');}if(options.fallback && typeof options.fallback === 'function'){try{options.fallback();}catch(fallbackError){console.error(`[Dash Humanizer] Fallback error in ${context}:`,fallbackError);}}return{error,context,isCritical,handled:true};}static isCritical(error){if(!error)return false;if(error instanceof DOMException){return true;}if(error.name === 'NotAllowedError' || error.name === 'SecurityError' || error.message?.toLowerCase().includes('permission')){return true;}if(error.message?.toLowerCase().includes('clipboard')){return true;}if(error.message?.toLowerCase().includes('cross-origin')|| error.message?.toLowerCase().includes('cors')){return true;}return false;}static getUserMessage(error,context){const errorMessages ={'NotAllowedError':'Unable to access clipboard. Please grant permission in your browser settings.','SecurityError':'Cannot modify this field due to security restrictions.','clipboard-write':'Unable to copy to clipboard. Please try again or copy manually.','clipboard-read':'Unable to read from clipboard. Please grant permission.','cross-origin':'Cannot access content from this frame due to security restrictions.','dom-manipulation':'Unable to modify text in this field. It may be protected.','storage-quota':'Storage quota exceeded. Some settings may not be saved.','storage-sync':'Unable to sync settings. Changes will be saved locally.','transformation':'An error occurred while transforming text. Please try again.','default':'An error occurred. Please try again.'};if(error.name && errorMessages[error.name]){return errorMessages[error.name];}if(context && errorMessages[context]){return errorMessages[context];}const errorMsg = error.message?.toLowerCase()|| '';if(errorMsg.includes('clipboard')){return errorMessages['clipboard-write'];}if(errorMsg.includes('permission')|| errorMsg.includes('not allowed')){return errorMessages['NotAllowedError'];}if(errorMsg.includes('security')|| errorMsg.includes('cross-origin')){return errorMessages['SecurityError'];}if(errorMsg.includes('quota')){return errorMessages['storage-quota'];}return errorMessages['default'];}static showUserNotification(message,type = 'error',duration = 3000){const notification = document.createElement('div');notification.className = 'dash-humanizer-notification';notification.setAttribute('role','alert');notification.setAttribute('aria-live','assertive');const colors ={error:'#f44336',warning:'#ff9800',info:'#2196f3',success:'#4caf50'};const bgColor = colors[type] || colors.error;notification.style.cssText = ` position:fixed;top:20px;right:20px;background:${bgColor};color:white;padding:12px 16px;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,0.2);z-index:2147483647;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;font-size:14px;max-width:300px;animation:slideIn 200ms ease-out;`;notification.textContent = message;if(!document.getElementById('dash-humanizer-notification-styles')){const style = document.createElement('style');style.id = 'dash-humanizer-notification-styles';style.textContent = ` @keyframes slideIn{from{transform:translateX(400px);opacity:0;}to{transform:translateX(0);opacity:1;}}@keyframes slideOut{from{transform:translateX(0);opacity:1;}to{transform:translateX(400px);opacity:0;}}`;document.head.appendChild(style);}document.body.appendChild(notification);setTimeout(()=>{notification.style.animation = 'slideOut 200ms ease-in';setTimeout(()=>{if(notification.parentNode){notification.remove();}},200);},duration);}static wrapAsync(fn,context,options ={}){return async function(...args){try{return await fn.apply(this,args);}catch(error){ErrorHandler.handle(error,context,options);return options.defaultReturn;}};}static wrap(fn,context,options ={}){return function(...args){try{return fn.apply(this,args);}catch(error){ErrorHandler.handle(error,context,options);return options.defaultReturn;}};}static log(message,data){console.log(`[Dash Humanizer] ${message}`,data || '');}static warn(message,data){console.warn(`[Dash Humanizer] ${message}`,data || '');}}if(typeof module !== 'undefined' && module.exports){module.exports = ErrorHandler;}else{window.ErrorHandler = ErrorHandler;}